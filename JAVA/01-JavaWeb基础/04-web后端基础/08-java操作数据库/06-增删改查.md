# 增删改查


## 删除

需求:根据id删除数据


`SQL：delete from user where id = 5;`


::: code-group

```java [写死方式]
/**
 * 根据id删除
 */
@Delete("delete from user where id = 5")
public void deleteById();

```

```java [动态sql]
/**
 * 根据id删除
 */
@Delete("delete from user where id = #{id}")
public void deleteById(Integer id);

// deleteById 是有返回值的 
// 上面是不需要返回值的时候可以写 void
@Delete("delete from user where id = #{id}")
public Integer deleteById(Integer id);

```

```jade [单元测试]
@Test
public void testDeleteById(){
    userMapper.deleteById(36);
}

```

:::

![LOGO](/public/image/javapublic/0fa3794d-6f6d-4010-be41-219d55fb55b7.png)


## 新增

需求：添加一个用户

`insert into user(username,password,name,age) values('zhouyu','123456','周瑜',20);`


::: code-group

```java [Mapper接口]
/**
 * 添加用户
 */
@Insert("insert into user(username,password,name,age) values(#{username},#{password},#{name},#{age})")
public void insert(User user);
```

```java [单元测试]
// 如果在SQL语句中，我们需要传递多个参数，我们可以把多个参数封装到一个对象中。
// 然后在SQL语句中，我们可以通过#{对象属性名}的方式，获取到对象中封装的属性值
@Test
public void testInsert(){
    User user = new User();
    user.setUsername("admin");
    user.setPassword("123456");
    user.setName("管理员");
    user.setAge(30);
    userMapper.insert(user);
}

```
:::


![LOGO](/public/image/javapublic/c40a85e3-8fe7-4ced-bc40-1c36276a861c.png)
















































## 修改


需求：根据ID更新用户信息

`update user set username = 'zhouyu', password = '123456', name = '周瑜', age = 20 where id = 1；`


::: code-group

```java [Mapper接口]
/**
 * 根据id更新用户信息
 */
@Update("update user set username = #{username},password = #{password},name = #{name},age = #{age} where id = #{id}")
public void update(User user);
```

```java [单元测试]
@Test
public void testUpdate(){
    User user = new User();
    user.setId(6);
    user.setUsername("admin666");
    user.setPassword("123456");
    user.setName("管理员");
    user.setAge(30);
    userMapper.update(user);
}
```
:::



![LOGO](/public/image/javapublic/dc34a4ea-c131-405b-a7ed-bb47b88244c1.png)



## 查询


需求：根据用户名和密码查询用户信息

`select* fromuser whereusername = 'zhouyu' and password = '123456'`

::: code-group

```java [Mapper接口]
/**
 * 根据用户名和密码查询用户信息
 */
@Select("select * from user where username = #{username} and password = #{password}")
public User findByUsernameAndPassword(@Param("username") String username, @Param("password") String password);
```

```java [单元测试]
@Test
public void testFindByUsernameAndPassword(){
    User user = userMapper.findByUsernameAndPassword("admin666", "123456");
    System.out.println(user);
}
```
:::


![LOGO](/public/image/javapublic/80a76837-fb00-47df-95fe-0d4f50860b74.png)


:::tip 注解

`@param` 注解的作用是为接口的方法形参起名字的

Java编译后实际参数名变成 arg0, arg1 也就是
`findByUsernameAndPassword(String username, String password);` 会变成
`findByUsernameAndPassword(arg0, arg1);` 如果没有 `@param` 那么将不知道如何赋值
`@param("username")` 其实就是给形参起名字


把 `@param("username")` 想象成信封上的地址标签

把 `String username` 想象成信件内容

调用方法相当于把信件(值)放进贴好标签的信封
:::











